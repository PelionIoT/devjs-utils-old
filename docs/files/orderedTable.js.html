<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>orderedTable.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/deviceJSUtils.html">deviceJSUtils</a></li>
                                <li><a href="../classes/orderedTable.html">orderedTable</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/utils.html">utils</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: orderedTable.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
// DeviceJS
// (c) WigWag LLC 2013

/**
 * @module utils
 */

var UUID = require(&#x27;node-uuid&#x27;);


var ROOT = this;

// a simple ordered hash table of callbacks (or anything for that matter)
/**
 * @class orderedTable
 * @constructor
 */
var orderedTable = function() {
    this.cbs = {}; 
    this.cborder = [];
    var count = 0;

    var that=this;
    /**
     * Add one or more items to the ordered list - to the back of the list. The items are added in order of their parameter list.
     * @method add
     * @param {any} item* Add items to the list
     * @return {string|array} If one item is added, a single unique string ID is returned. If more than one is added, an array of strings is returned. 
     * These ids can later be used to &lt;code&gt;remove&lt;/code&gt; the items.
     */
    this.add = function() {
    	var ret = [];
    	for(var n=0;n&lt;arguments.length;n++) {
            var id = UUID.v1();
            ret.push(id);
            that.cbs[id] = arguments[n];
            that.cborder.push(id);
            count++;
        }
        if(ret.length == 1)
            return ret[0];
        else if (ret.length == 0)
            return null;
        else
            return ret;
    };


    this.transferTo = function(table) {
      // not implemented
    };


    /**
     * Replace or add an item with a specified ID.&lt;br&gt;
     * &lt;i&gt;Normally orderedTable generates an ID for each item. This function requires you to pass in a unique ID. If this is the ID to an existing item
     * the item is simply replaced.&lt;/i&gt;
     * @method replaceAdd
     * @param {string} id The ID to use to uniquely reference the item.
     * @param {any} item The item to store in the table
     * @return {boolean} returns &lt;code&gt;item&lt;/code&gt; if the item already existed, or &lt;code&gt;null&lt;/code&gt; otherwise.
     */
    this.replaceAdd = function(id,item) {
        var exists = null;
        for(var n=0;n&lt;that.cborder.length;n++) {
            if(that.cborder[n] == id)
                exists = that.cborder[n];
        }       
        if(!exists) that.cborder.push(id);
        that.cbs[id] = item;
        return exists;
    }


    /**
     * Looks up one or more items by their ID
     * @return {array|any}  
     */
    this.lookup = function() {
    	var ret = [];
    	for(var n=0;n&lt;arguments.length;n++) {
    		if(that.cbs[arguments[n]])
    			ret.push(that.cbs[arguments[n]]);
        }
        if(ret.length == 1)
            return ret[0];
        else if (ret.length == 0)
            return null;
        else
            return ret;
    }

    this.lookupByOrder = function(o) {
        var ret = undefined;
        var i = that.cborder[o];
        if(i) {
            ret = that.cbs[i];
        }
        return ret;
    }

    /**
     * Add one or more items to the ordered list - adding each item in front of all other items.
     * @method addToFront
     * @param {any} item* Add items to the list. If more than one item, the last item in the arguments will be the first item in the list.
     * @return {string|array} If one item is added, a single unique string ID is returned. If more than one is added, an array of strings is returned. 
     * These ids can later be used to &lt;code&gt;remove&lt;/code&gt; the items.
     */
    this.addToFront = function() {
    	var ret = [];
        for(var n=0;n&lt;arguments.length;n++) {
            var id = UUID.v1();
            ret.splice(0,0,id);
            that.cbs[id] = arguments[n];
            that.cborder.splice(0,0,id);
            count++;
        }
        if(ret.length == 1)
            return ret[0];
        else if (ret.length == 0)
            return null;
        else
            return ret;
    }

    /**
     * Calls a function for each item in the list.
     * @method forEach
     * @param  {[type]} func The callback function.&lt;br&gt;
     * &lt;code&gt;callback(val,id,order)&lt;/code&gt;&lt;br&gt;
     * &lt;code&gt;id&lt;/code&gt; is the the unique ID of the element in the list&lt;br&gt;
     * &lt;code&gt;order&lt;/code&gt; is the zero-based order of the item in the list&lt;br&gt;&lt;br&gt;
     * &lt;code&gt;this&lt;/code&gt; for the &lt;code&gt;callback&lt;/code&gt; is the item in the list&lt;br&gt;&lt;br&gt;
     * NOTE: It is safe to use &lt;code&gt;orderedTable.remove()&lt;/code&gt; during this call.
     */
    this.forEach = function(func) {
    	var c = 0;
    	for(var n=0;n&lt;that.cborder.length;n++) {
    		if(that.cbs[that.cborder[n]]) {// if it is still in the table, return it
    			func.call(ROOT,that.cbs[that.cborder[n]],that.cborder[n],c);
    			c++;
    		}
    	}
    } 

    /**
     * Remove items from the ordered list.
     * @method remove
     * @param {string} id* one or more id values. These value correspond to a certain item in the list. These item(s) will be removed.
     * @return {any|Array} A single item, null if nothing, or an Array of multiple items.
     */
    this.remove = function() {
    	var ret = [];
    	for(var n=0;n&lt;arguments.length;n++) {
    		if (that.cbs[arguments[n]]) {
    			ret.push(that.cbs[arguments[n]]);
    			delete that.cbs[arguments[n]];  // the remaining cborder entry is just ignored
                count--;
                var index = that.cborder.indexOf(arguments[n]);
                if(index &gt;= 0) {
                    that.cborder.splice(index,1);
                }
    		}
    	}
        if(ret.length == 1)
            return ret[0];
        else if (ret.length == 0)
            return null;
        else
            return ret;
    }


    /**
     * Removes all elements, clears list.
     * @method removeAll
     */
    this.removeAll = function() {
        that.cbs = {}; 
        that.cborder = [];
        count = 0;
    }


    /**
     * Returns an ordered list of the items in the table, in the same order the items were put in (FIFO).
     * @method getList
     * @return an array of the items in their original order.
     */
    this.getList = function() {
    	var ret = [];
    	for(var n=0;n&lt;that.cborder.length;n++) {
    		if(that.cbs[that.cborder[n]]) // if it is still in the table, return it
    			ret.push(that.cbs[that.cborder[n]]);
    	}
    	return ret;
    }
    /**
     * Returns an ordered list of the items in the table, in the reverse of the order the items were put in (FILO).
     * @method getReverseList
     * @return an array of the items in their reverse order.
     */
    this.getReverseList = function() {
    	var ret = [];
    	for(var n=that.cborder.length;n&gt;=0;n--) {
    		if(that.cbs[that.cborder[n]]) // if it is still in the table, return it
    			ret.push(that.cbs[that.cborder[n]]);
    	}
    	return ret;
    }

    /**
     * Removes an item by its order in the table.
     * @param  {[type]} n The zero-based order of the item to remove
     * @return {any} Returns undefined if order value too high and nothing removed.
     */
    this.removeByOrder = function(n) {
        var ret = undefined;
        if(that.cborder[n]) {
            ret = that.cbs[that.cborder[n]];
            delete that.cbs[that.cborder[n]];
            that.cborder.splice(n,1); // remove from order index
            count--;
        }
        return ret;
    }


    /**
     * Replace an item by order. An item must already exist for this to work.&lt;br&gt;
     * @method replaceAdd
     * @param {string} n The zero-based order of the item
     * @param {any} item The item to store in the table
     * @return {any} the original item that was replaced
     */
    this.replaceByOrder = function(n,item) {
        var ret = undefined;
        var exists = null;
        var id = that.cborder[n];
        if(id &amp;&amp; that.cbs[id]) {
            ret = that.cbs[id];
            that.cbs[id] = item;
        }
        return ret;
    }


    this.length = function() {
        return count;
    }
}

exports = module.exports = orderedTable;

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
